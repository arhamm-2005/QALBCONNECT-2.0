<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qalb Connect - Home</title>
    <link rel="stylesheet" href="css/home.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="particles" id="particles"></div>
    <div class="header">
        <h1>Qalb Connect</h1>
        <div class="logout-container">
            <button type="button" class="logout-button" id="logoutButton"><a href="index.html">Logout</a></button>
        </div>
    </div>

    <div class="quote">
        <p id="randomQuote"></p>
    </div>

    <div class="grid-container">
        <a href="qazaumri.html" class="grid-item">
            <div class="icon">ðŸ“Š</div>
            Qaza-e-Umri Calculator
        </a>
        <a href="prophets.html" class="grid-item">
            <div class="icon">ðŸ“š</div>
            Kids Page "Prophets Stories"
        </a>
        <a href="versebymood.html" class="grid-item">
            <div class="icon">ðŸ’­</div>
            Verse By Mood
        </a>
        <a href="tasbeehcounter.html" class="grid-item">
            <div class="icon">ðŸ“¿</div>
            Tasbeeh Counter
        </a>
        <a href="asmaulhusna.html" class="grid-item">
            <div class="icon">ðŸŒŸ</div>
            99 Names of Allah
        </a>
        <a class="grid-item">
            <div class="icon">ðŸŒ™</div>
            Dhul-Hijjah 25, 1446 AH
        </a>
    </div>

    <script src="js/home-script.js" defer></script>
    <script>
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Logout functionality
        document.getElementById('logoutButton').addEventListener('click', async () => {
            try {
                const response = await fetch('http://localhost:8080/logout', { method: 'POST' });
                if (response.ok) {
                    window.location.href = 'login.html';
                } else {
                    console.error('Logout failed:', response.statusText);
                    alert('Logout failed. Please try again.');
                }
            } catch (error) {
                console.error('Error during logout:', error);
                alert('An error occurred during logout. Check if backend is running and CORS is configured.');
            }
        });

        // Quote functionality
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();

            const islamicQuotes = [
                {
                    quote: "Indeed, Allah does not change the condition of a people until they change what is in themselves.",
                    source: "Quran 13:11"
                },
                {
                    quote: "The best among you are those who have the best character.",
                    source: "Prophet Muhammad (PBUH)"
                },
                {
                    quote: "Do not lose hope, nor be sad.",
                    source: "Quran 3:139"
                },
                {
                    quote: "Verily, with hardship comes ease.",
                    source: "Quran 94:5"
                },
                {
                    quote: "He who knows himself, knows his Lord.",
                    source: "Imam Ali (AS)"
                },
                {
                    quote: "The most beloved of deeds to Allah are those that are continuous, even if they are few.",
                    source: "Prophet Muhammad (PBUH)"
                },
                {
                    quote: "And put your trust in Allah if you are believers indeed.",
                    source: "Quran 5:23"
                },
                {
                    quote: "Patience is a pillar of faith.",
                    source: "Prophet Muhammad (PBUH)"
                }
            ];

            const randomQuoteElement = document.getElementById('randomQuote');
            let currentQuoteIndex = 0;

            function displayNextQuote() {
                if (randomQuoteElement) {
                    const quoteData = islamicQuotes[currentQuoteIndex];
                    randomQuoteElement.textContent = `${quoteData.quote} - (${quoteData.source})`;
                    currentQuoteIndex = (currentQuoteIndex + 1) % islamicQuotes.length;
                }
            }

            displayNextQuote();
            setInterval(displayNextQuote, 10000);
        });
    </script>
</body>

</html>